---
import BaseHead from '../../components/BaseHead.astro';
import { getCollection } from 'astro:content';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

const services = (await getCollection('services')).sort(
	(a, b) => (a.data.order ?? 0) - (b.data.order ?? 0),
);
---
<!doctype html>
<html lang="en">
	<head>
		<BaseHead title="Services | Leading Edge Construction" />
	</head>
	<body class="services-page">
		<Header />
		<main>
			<section class="services-hero">
				<div class="wrap">
					<p class="eyebrow">Our craft</p>
					<h1>Integrated outdoor living services</h1>
					<p>
						Every service is delivered by an in-house team that collaborates across disciplines—ensuring your
							pool, landscape, and structures feel designed as one cohesive experience.
					</p>
				</div>
			</section>
			<section class="services-list">
				<div class="wrap">
					<ul class="card-grid">
						{services.map((service) => {
							const image = service.data.heroImage;
							return (
								<li>
									<a class="service-card" href={`/services/${service.slug}`}>
										{image && (
											<img
												src={image.src}
												width={image.width}
												height={image.height}
												alt={service.data.title}
												loading="lazy"
											/>
										)}
										<div class="service-card__body">
											<h2>{service.data.title}</h2>
											{service.data.excerpt && <p>{service.data.excerpt}</p>}
											<span class="service-card__link">View details →</span>
										</div>
									</a>
								</li>
							);
						})}
					</ul>
				</div>
			</section>
		</main>
		<Footer />
		<style>
			:global(body.services-page) {
				background: #fdf9f4;
				margin: 0;
				color: #2f2a25;
			}
			main {
				padding: 0 0 6rem 0;
			}
			.services-hero {
				padding: clamp(5rem, 10vw, 7rem) 0 clamp(3rem, 8vw, 4rem);
			}
			.wrap {
				width: min(1120px, 92vw);
				margin: 0 auto;
			}
			.eyebrow {
				text-transform: uppercase;
				letter-spacing: 0.14em;
				font-size: 0.75rem;
				font-weight: 600;
				color: #a06f2a;
				margin-bottom: 1rem;
			}
			.services-hero h1 {
				font-size: clamp(2.4rem, 5vw, 3.4rem);
				margin-bottom: 1rem;
			}
			.services-hero p {
				max-width: 620px;
				color: #5f554d;
			}
			.services-list {
				padding: 0 0 clamp(4rem, 8vw, 6rem);
			}
			.card-grid {
				list-style: none;
				margin: 0;
				padding: 0;
				display: grid;
				gap: 2rem;
				grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
			}
			.service-card {
				background: #ffffff;
				border-radius: 24px;
				overflow: hidden;
				display: grid;
				text-decoration: none;
				color: inherit;
				box-shadow: 0 18px 36px rgba(62, 45, 29, 0.12);
				transition: transform 160ms ease, box-shadow 160ms ease;
			}
			.service-card:hover {
				transform: translateY(-4px);
				box-shadow: 0 24px 44px rgba(62, 45, 29, 0.18);
			}
			.service-card img {
				width: 100%;
				height: 200px;
				object-fit: cover;
			}
			.service-card__body {
				padding: 1.8rem;
				display: grid;
				gap: 0.8rem;
			}
			.service-card__body h2 {
				margin: 0;
				font-size: 1.4rem;
			}
			.service-card__body p {
				margin: 0;
				color: #5f554d;
			}
			.service-card__link {
				font-weight: 600;
				color: #0f6a6a;
			}
		</style>
	</body>
</html>
