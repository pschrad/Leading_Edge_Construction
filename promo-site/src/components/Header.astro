---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';

const isOverlay = Astro.url.pathname === '/' || Astro.url.pathname.startsWith('/services/');
---

<header class={`site-header${isOverlay ? ' site-header--home' : ''}`}>
	<div class="wrap nav">
		<a class="brand" href="/">
			<span class="brand__mark">LE</span>
			<span class="brand__text">
				<strong>{SITE_TITLE}</strong>
				<span>Pools &amp; Outdoor Living</span>
			</span>
		</a>
		<nav class="nav__links">
			<HeaderLink href="/">Home</HeaderLink>
			<HeaderLink href="/services">Services</HeaderLink>
			<HeaderLink href="/portfolio">Portfolio</HeaderLink>
			<HeaderLink href="/blog">Insights</HeaderLink>
			<HeaderLink href="/about">About</HeaderLink>
		</nav>
		<a class="nav__cta" href="/contact">Book consultation</a>
	</div>
</header>
<style>
	.site-header {
		position: sticky;
		top: 0;
		z-index: 20;
		background: rgba(253, 249, 244, 0.94);
		backdrop-filter: blur(12px);
		border-bottom: 1px solid rgba(160, 111, 42, 0.18);
		transition: background 200ms ease, border-color 200ms ease;
	}
	.site-header--home {
		position: absolute;
		width: 100%;
		background: transparent;
		backdrop-filter: none;
		border-bottom: none;
	}
	.site-header--home .nav__links a,
	.site-header--home .nav__links a.active,
	.site-header--home .brand,
	.site-header--home .brand__text span,
	.site-header--home .nav__cta {
		color: #ffffff;
	}
	.site-header--home .nav__links a {
		border-bottom-color: rgba(255, 255, 255, 0.3);
	}
	.site-header--home .nav__links a:hover,
	.site-header--home .nav__links a.active {
		border-bottom-color: #ffffff;
		color: #ffffff;
	}
	.site-header--home .brand__mark {
		background: rgba(15, 106, 106, 0.85);
	}
	.site-header--home .brand__text span {
		color: rgba(255, 255, 255, 0.7);
	}
	.site-header--home .nav__cta {
		border: 2px solid rgba(255, 255, 255, 0.75);
		background: transparent;
		box-shadow: none;
	}
	.site-header--home .nav__cta:hover {
		background: rgba(255, 255, 255, 0.12);
		box-shadow: none;
	}
	.wrap {
		width: min(1120px, 92vw);
		margin: 0 auto;
	}
	.nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 1rem 0;
		gap: 1.5rem;
	}
	.brand {
		display: inline-flex;
		align-items: center;
		gap: 0.75rem;
		text-decoration: none;
		color: #2f2a25;
	}
	.brand__mark {
		display: grid;
		place-items: center;
		width: 40px;
		height: 40px;
		border-radius: 12px;
		background: linear-gradient(135deg, #0f6a6a 0%, #2f534d 100%);
		color: #fdf9f4;
		font-weight: 700;
		letter-spacing: 0.08em;
	}
	.brand__text {
		display: flex;
		flex-direction: column;
		font-size: 0.95rem;
		line-height: 1.3;
	}
	.brand__text strong {
		font-size: 1rem;
		font-weight: 700;
	}
	.brand__text span {
		font-size: 0.72rem;
		text-transform: uppercase;
		letter-spacing: 0.18em;
		color: #a06f2a;
	}
	.nav__links {
		display: flex;
		align-items: center;
		gap: 1.5rem;
		font-size: 0.95rem;
	}
	.nav__links a {
		color: #3a342f;
		text-decoration: none;
		padding-bottom: 0.4rem;
		border-bottom: 2px solid transparent;
		transition: border-color 120ms ease, color 120ms ease;
	}
	.nav__links a:hover,
	.nav__links a.active {
		border-bottom-color: #0f6a6a;
		color: #0f6a6a;
	}
	.nav__cta {
		padding: 0.65rem 1.5rem;
		border-radius: 999px;
		background: #0f6a6a;
		color: #fdf9f4;
		font-weight: 600;
		text-decoration: none;
		box-shadow: 0 12px 24px rgba(15, 106, 106, 0.18);
		transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease, border-color 120ms ease;
	}
	.nav__cta:hover {
		transform: translateY(-1px);
		box-shadow: 0 16px 30px rgba(15, 106, 106, 0.22);
	}
	@media (max-width: 900px) {
		.nav {
			flex-wrap: wrap;
		}
		.nav__links {
			order: 3;
			width: 100%;
			justify-content: space-between;
			flex-wrap: wrap;
			row-gap: 0.75rem;
			padding-bottom: 0.5rem;
			border-top: 1px solid rgba(160, 111, 42, 0.18);
			padding-top: 0.75rem;
		}
		.site-header--home .nav__links {
			border-top: 1px solid rgba(255, 255, 255, 0.25);
		}
		.nav__cta {
			margin-left: auto;
		}
	}
	@media (max-width: 520px) {
		.nav__links {
			flex-direction: column;
			align-items: flex-start;
		}
		.nav__cta {
			width: 100%;
			justify-content: center;
			text-align: center;
		}
	}
</style>
