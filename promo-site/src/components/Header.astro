---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
import LogoImage from '../assets/Logo.png';

const isOverlay = Astro.url.pathname === '/' || Astro.url.pathname.startsWith('/services/');
---

<header class={`site-header${isOverlay ? ' site-header--home' : ''}`}>
	<div class="wrap nav">
		<a class="brand" href="/">
			<img
				src={LogoImage.src}
				width={LogoImage.width}
				height={LogoImage.height}
				class="brand__logo"
				alt={`${SITE_TITLE} logo`}
				loading="lazy"
			/>
			<div class="brand__text">
				<strong>{SITE_TITLE}</strong>
				<span>Pools &amp; Outdoor Living</span>
			</div>
		</a>
		<nav class="nav__links">
			<HeaderLink href="/">Home</HeaderLink>
			<HeaderLink href="/services">Services</HeaderLink>
			{/** Temporarily hidden until portfolio content is published */}
			{/* <HeaderLink href="/portfolio">Portfolio</HeaderLink> */}
			<HeaderLink href="/blog">Contact us</HeaderLink>
			<HeaderLink href="/about">About us</HeaderLink>
		</nav>
		<a
			class="nav__cta"
			href="https://www.thumbtack.com/md/davidsonville/landscaping/leading-edge-avelar-contractors-llc/service/464791489632141329?utm_source=cma-google&utm_medium=googlereserve&hl=en-US&gei=9e_raIKWCK3V5NoP152j8A8&rwg_token=ACgRB3cLkTdWxDK6S3GuUPR8Jsi8vm53jRs8M5F72TZ3m2Z7kQMwhLCTPetQmVbfdtTAw5_u-CtrQ95fX7QcnRebiYbsuCbHTw%3D%3D&authuser=1"
			target="_blank"
			rel="noopener noreferrer"
		>
			Book consultation
		</a>
	</div>
</header>
<style>
	.site-header {
		position: sticky;
		top: 0;
		z-index: 20;
		background: rgba(253, 249, 244, 0.94);
		backdrop-filter: blur(12px);
		border-bottom: 1px solid rgba(160, 111, 42, 0.18);
		transition: background 200ms ease, border-color 200ms ease;
	}
	.site-header--home {
		position: absolute;
		width: 100%;
		background: transparent;
		backdrop-filter: none;
		border-bottom: none;
	}
	.site-header--home .nav__links a,
	.site-header--home .nav__links a.active,
	.site-header--home .brand,
	.site-header--home .nav__cta {
		color: #ffffff;
	}
	.site-header--home .brand__text strong {
		color: #ffffff;
	}
	.site-header--home .brand__text span {
		color: rgba(255, 255, 255, 0.75);
	}
	.site-header--home .nav__links a {
		border-bottom-color: rgba(255, 255, 255, 0.3);
	}
	.site-header--home .nav__links a:hover,
	.site-header--home .nav__links a.active {
		border-bottom-color: #ffffff;
		color: #ffffff;
	}
	.site-header--home .nav__cta {
		border: 2px solid rgba(255, 255, 255, 0.75);
		background: transparent;
		box-shadow: none;
	}
	.site-header--home .nav__cta:hover {
		background: rgba(255, 255, 255, 0.12);
		box-shadow: none;
	}
	.wrap {
		width: min(1120px, 92vw);
		margin: 0 auto;
	}
	.nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 1rem 0;
		gap: 1.5rem;
	}
	.brand {
		display: inline-flex;
		align-items: center;
		gap: 0.75rem;
		text-decoration: none;
		color: #2f2a25;
	}
	.brand__logo {
		display: block;
		height: 85px;
		width: auto;
		object-fit: contain;
	}
	.brand__text {
		display: flex;
		flex-direction: column;
		gap: 0.2rem;
		font-size: 0.95rem;
		line-height: 1.2;
		color: inherit;
	}
	.brand__text strong {
		font-size: 1rem;
		font-weight: 700;
		color: #2f2a25;
	}
	.brand__text span {
		font-size: 0.72rem;
		text-transform: uppercase;
		letter-spacing: 0.18em;
		color: #5f554d;
	}
	.nav__links {
		display: flex;
		align-items: center;
		gap: 1.5rem;
		font-size: 0.95rem;
	}
	.nav__links a {
		color: #3a342f;
		text-decoration: none;
		padding-bottom: 0.4rem;
		border-bottom: 2px solid transparent;
		transition: border-color 120ms ease, color 120ms ease;
	}
	.nav__links a:hover,
	.nav__links a.active {
		border-bottom-color: #0f6a6a;
		color: #0f6a6a;
	}
	.nav__cta {
		padding: 0.65rem 1.5rem;
		border-radius: 999px;
		background: #0f6a6a;
		color: #fdf9f4;
		font-weight: 600;
		text-decoration: none;
		box-shadow: 0 12px 24px rgba(15, 106, 106, 0.18);
		transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease, border-color 120ms ease;
	}
	.nav__cta:hover {
		transform: translateY(-1px);
		box-shadow: 0 16px 30px rgba(15, 106, 106, 0.22);
	}
	@media (max-width: 900px) {
		.nav {
			flex-wrap: wrap;
		}
		.nav__links {
			order: 3;
			width: 100%;
			justify-content: space-between;
			flex-wrap: wrap;
			row-gap: 0.75rem;
			padding-bottom: 0.5rem;
			border-top: 1px solid rgba(160, 111, 42, 0.18);
			padding-top: 0.75rem;
		}
		.site-header--home .nav__links {
			border-top: 1px solid rgba(255, 255, 255, 0.25);
		}
		.nav__cta {
			margin-left: auto;
		}
	}
	@media (max-width: 640px) {
		.nav {
			flex-wrap: wrap;
			align-items: center;
			gap: 0.75rem;
		}
		.nav__links {
			order: 3;
			width: 100%;
			flex-wrap: nowrap;
			overflow-x: auto;
			gap: 1rem;
			padding: 0.25rem 0 0.35rem;
			border-top: 1px solid rgba(160, 111, 42, 0.18);
			justify-content: flex-start;
			scrollbar-width: none;
		}
		.nav__links::-webkit-scrollbar {
			display: none;
		}
		.nav__cta {
			width: 100%;
			text-align: center;
			justify-content: center;
		}
	}
</style>
